<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Ostrich JavaScript Benchmark</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<style type="text/css">
			body {
				color: #EAEAEA;
				background-color: #333333;
			}
			#error {
				color: #E93F16;
			}
			.table th, .table td {
				text-align: center;
			}
		</style>
		<script type="text/javascript" src="run.js"></script>
		<script type="text/javascript" src="NavierStokes.js"></script>
		<script type="text/javascript" src="NBody.js"></script>
		<script type="text/javascript">
			var completed = 0;

			function AddError(name, error) {
				console.log(name + ': ' + error);
				error = '<b>Error: </b>' + error.message;
				var box = document.getElementById("error");
				box.innerHTML = box.innerHTML + "<br />" + "<b>Benchamrk: </b>" + name + ' - ' + error;
			}

			function AddScore(score) {
				var status = document.getElementById("result");
				var benchmarks = BenchmarkSuite.benchmarks;

				var html = "<br /><table class='table table-bordered'>" + 
								"<tr><th align='center'>Benchmark Name</th>" +
									"<th align='center'>Geometric Mean</th>" +
									"<th align='center'>Average</th>" +
									"<th align='center'>Standard Deviation</th>" +
									"<th align='center'>Min</th>" +
								"<th align='center'>Max</th></tr>";

				for(var i = 0; i < benchmarks.length; i++) {
					var results = BenchmarkSuite.results[i];

					var mean = BenchmarkSuite.GeometricMean(results);
					var min = BenchmarkSuite.Min(results);
					var max = BenchmarkSuite.Max(results);
					var avg = BenchmarkSuite.Avg(results);
					var std = BenchmarkSuite.Std(avg, results);

					html = html + "<tr><td align='center'>" + benchmarks[i].name + "</td>" +
								"<td align='center'>" + mean.toFixed(5) + "</td>" +
								"<td align='center'>" + avg.toFixed(5) + "</td>" +
								"<td align='center'>" + std.toFixed(5) + "</td>" +
								"<td align='center'>" + min.toFixed(5) + "</td>" +
								"<td align='center'>" + max.toFixed(5) + "</td></tr>";
				}

				html = html + "</table>";
				status.innerHTML = html;
			}

			function Run() {
				// append the progress bar elements..
				document.getElementById("result").innerHTML="Started running...";
				document.getElementById("error").innerHTML="";
				BenchmarkSuite.Run({
					NotifyError : AddError,
					NotifyScore : AddScore
				});
			}
		</script>
</head>
<body>
	<h2>Ostrich Benchmark Suite</h2>
	<button onClick="Run();" class="btn btn-default">Run Ostrich Benchmarks</button>
	<br />
	<div class="container">
		<div id="result"></div>
		<div id="error"></div>
	</div>
</body>
</html>
